{% extends 'layout_2.html' %}
<!---->
<style>
  :root {
    --color-background: #f9f7f7;
    --color-secondary: #000046;
    --color-primary: #1cb5e0;
    --color-accent: #dbe2ef;
    --gradient-primary: linear-gradient(90deg, #000046, #1cb5e0);
  }

  .clinic__header {
    font-weight: 500;
    margin-bottom: 30rem !important;
  }

  .clinic__form {
    margin-top: 2rem;
  }

  .clinic__save__btn {
    background: var(--gradient-primary);
  }
</style>

{% block content %}
<div class="container my-5">
  <div class="mb-5">
    <h2 class="mb-3 clinic__header">Clinic Information</h2>

    <form class="clinic__form" method="post" action="#">
      {% csrf_token %}
      <div class="row mb-3">
        <fieldset class="col-md-6">
          <label for="clinic_name" class="form-label">Name</label>
          <input
            type="text"
            id="clinic_name"
            name="name"
            class="form-control"
            value="{{ clinic.name }}"
            required
          />
        </fieldset>

        <fieldset class="col-md-6">
          <label for="clinic_phone" class="form-label">Phone Number</label>
          <input
            type="text"
            id="clinic_phone"
            name="phone_number"
            class="form-control"
            value="{{ clinic.phone_number }}"
            required
          />
        </fieldset>
      </div>

      <div class="row mb-3">
        <fieldset class="col-md-6">
          <label for="clinic_city" class="form-label">City</label>
          <input
            type="text"
            id="clinic_city"
            name="city"
            class="form-control"
            value="{{ clinic.city }}"
            required
          />
        </fieldset>

        <fieldset class="col-md-6">
          <label for="clinic_state" class="form-label">State</label>
          <input
            type="text"
            id="clinic_state"
            name="state"
            class="form-control"
            value="{{ clinic.state }}"
            required
          />
        </fieldset>
      </div>

      <button type="submit" name="save_clinic" class="clinic__save__btn">
        Save Changes
      </button>
    </form>
  </div>

  <div class="mb-5">
    <h2 class="mb-3">Affiliated Doctors</h2>
    <table class="table table-striped table-bordered">
      <thead class="table-primary">
        <tr>
          <th>Name</th>
          <th>Office Address</th>
          <th>Working Schedule</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% if doctor_affiliations %} {% for affiliation in doctor_affiliations
        %}
        <tr>
          <td>{{ affiliation.doctor.name }}</td>
          <td>{{ affiliation.office_address }}</td>
          <td>{{ affiliation.working_schedule }}</td>
          <td>
            <form method="post" action="#">
              {% csrf_token %}
              <button
                type="submit"
                name="edit_doctor"
                value="{{ affiliation.id }}"
                class="btn btn-secondary btn-sm"
              >
                Edit
              </button>
            </form>
          </td>
        </tr>
        {% endfor %} {% else %}
        <tr>
          <td colspan="4" class="text-center py-3">No Doctors Found</td>
        </tr>
        {% endif %}
      </tbody>
    </table>

    <form method="post" action="#">
      {% csrf_token %}
      <fieldset class="mb-3">
        <label for="doctor_name" class="form-label">Doctor Name</label>
        {{ doctor_form.name }}
      </fieldset>
      <fieldset class="mb-3">
        <label for="doctor_office_address" class="form-label"
          >Office Address</label
        >
        {{ doctor_form.office_address }}
      </fieldset>
      <fieldset class="mb-3">
        <label for="doctor_working_schedule" class="form-label"
          >Working Schedule</label
        >
        {{ doctor_form.working_schedule }}
      </fieldset>

      <button type="submit" name="add_doctor" class="btn btn-success">
        Add New Doctor
      </button>
    </form>
  </div>
</div>
{% endblock %}
